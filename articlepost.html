<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Article or Stories</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .input-focus:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            outline: none;
        }
        
        .loading-spinner {
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Custom scrollbar for textarea */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        textarea::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        
        textarea::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
        
        /* Ensure proper mobile responsiveness */
        @media (max-width: 640px) {
            .container {
                margin: 0.5rem;
            }
            
            .form-padding {
                padding: 1rem;
            }
            
            .header-padding {
                padding: 1.5rem 1rem;
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-4 sm:py-8 max-w-4xl">
        <div class="bg-white rounded-xl shadow-2xl overflow-hidden">
            <!-- Header -->
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 header-padding">
                <h2 class="text-2xl sm:text-3xl font-bold text-white text-center">
                    <i class="fas fa-pen-fancy mr-2 sm:mr-3"></i>
                    Post Your Article or Story
                </h2>
            </div>

            <!-- Success/Error Messages -->
            <div id="messageContainer" class="hidden">
                <div class="mx-4 sm:mx-8 mt-4 sm:mt-6">
                    <div id="successMessage" class="hidden bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg mb-4">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle mr-2 text-green-600"></i>
                            <span class="font-medium">Success!</span>
                            <span class="ml-2">Article submitted successfully!</span>
                        </div>
                    </div>
                    <div id="errorMessage" class="hidden bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg mb-4">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle mr-2 text-red-600 mt-0.5"></i>
                            <div>
                                <span class="font-medium">Error!</span>
                                <div id="errorText" class="mt-1">Please check your inputs and try again.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Form -->
            <form id="articleForm" class="form-padding p-4 sm:p-8">
                <div class="space-y-6">
                    <!-- Name Field -->
                    <div class="w-full">
                        <label for="titlename" class="flex items-center text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-user mr-2 text-blue-600"></i>
                            Full Name
                        </label>
                        <input 
                            type="text" 
                            id="titlename" 
                            name="titlename" 
                            placeholder="Enter your full name" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition duration-200 text-gray-800"
                        >
                        <div id="nameError" class="text-red-500 text-sm mt-2 hidden flex items-center">
                            <i class="fas fa-times-circle mr-1"></i>
                            Please enter a valid name (2-50 characters, letters only)
                        </div>
                    </div>

                    <!-- Mobile Number Field -->
                    <div class="w-full">
                        <label for="mobile" class="flex items-center text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-mobile-alt mr-2 text-blue-600"></i>
                            Mobile Number
                        </label>
                        <div class="relative">
                            <input 
                                type="tel" 
                                id="mobile" 
                                name="mobile" 
                                placeholder="Enter 10-digit mobile number" 
                                required
                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg input-focus transition duration-200 text-gray-800"
                                maxlength="10"
                            >
                            <div id="mobileValidation" class="absolute right-3 top-1/2 transform -translate-y-1/2 hidden">
                                <i class="fas fa-check-circle text-green-500"></i>
                            </div>
                        </div>
                        <div id="mobileError" class="text-red-500 text-sm mt-2 hidden flex items-center">
                            <i class="fas fa-times-circle mr-1"></i>
                            Please enter a valid 10-digit mobile number (starting with 6-9)
                        </div>
                        <div id="mobileSuccess" class="text-green-600 text-sm mt-2 hidden flex items-center">
                            <i class="fas fa-check-circle mr-1"></i>
                            Valid mobile number
                        </div>
                    </div>

                    <!-- Article Title -->
                    <div class="w-full">
                        <label for="articleTitle" class="flex items-center text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-heading mr-2 text-blue-600"></i>
                            Article Title
                        </label>
                        <input 
                            type="text" 
                            id="articleTitle" 
                            name="articleTitle" 
                            placeholder="Enter an engaging title for your article" 
                            required
                            maxlength="100"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition duration-200 text-gray-800"
                        >
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span>Make it catchy and descriptive</span>
                            <span><span id="titleCount">0</span>/100 characters</span>
                        </div>
                    </div>

                    <!-- Article Content -->
                    <div class="w-full">
                        <label for="articleContent" class="flex items-center text-sm font-semibold text-gray-700 mb-3">
                            <i class="fas fa-edit mr-2 text-blue-600"></i>
                            Article Content
                        </label>
                        <textarea 
                            id="articleContent" 
                            name="articleContent" 
                            placeholder="Write your article or story here... Share your thoughts, experiences, or creative content. Be detailed and engaging!"
                            rows="8"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg input-focus transition duration-200 resize-vertical text-gray-800"
                            style="min-height: 200px;"
                        ></textarea>
                        <div class="flex justify-between text-xs text-gray-500 mt-2">
                            <span><span id="contentCount">0</span> characters (minimum 50 recommended)</span>
                            <span id="contentStatus" class="text-orange-500">Too short</span>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div class="pt-6">
                        <button 
                            type="submit" 
                            id="submitBtn"
                            class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-lg transition duration-300 transform hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                        >
                            <span id="btnText" class="flex items-center justify-center">
                                <i class="fas fa-paper-plane mr-2"></i>
                                Publish Article
                            </span>
                            <span id="btnLoading" class="hidden flex items-center justify-center">
                                <div class="loading-spinner w-5 h-5 border-2 border-white rounded-full mr-2"></div>
                                Publishing...
                            </span>
                        </button>
                    </div>
                </div>
            </form>
        </div>
        
        <!-- Footer -->
        <div class="text-center mt-8 text-white text-sm opacity-75">
            <p>Share your stories and inspire others</p>
        </div>
    </div>

    <script>
        // DOM Elements
        const form = document.getElementById('articleForm');
        const mobileInput = document.getElementById('mobile');
        const nameInput = document.getElementById('titlename');
        const titleInput = document.getElementById('articleTitle');
        const contentInput = document.getElementById('articleContent');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = document.getElementById('btnText');
        const btnLoading = document.getElementById('btnLoading');

        // Character counters
        const titleCount = document.getElementById('titleCount');
        const contentCount = document.getElementById('contentCount');
        const contentStatus = document.getElementById('contentStatus');

        // Error/Success elements
        const messageContainer = document.getElementById('messageContainer');
        const successMessage = document.getElementById('successMessage');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');

        // Validation elements
        const mobileError = document.getElementById('mobileError');
        const mobileSuccess = document.getElementById('mobileSuccess');
        const mobileValidation = document.getElementById('mobileValidation');
        const nameError = document.getElementById('nameError');

        // Validation functions
        function validateMobile(mobile) {
            const mobileRegex = /^[6-9]\d{9}$/; // Indian mobile number format starting with 6-9
            return mobileRegex.test(mobile);
        }

        function validateName(name) {
            const nameRegex = /^[a-zA-Z\s]{2,50}$/;
            return nameRegex.test(name.trim());
        }

        function validateTitle(title) {
            return title.trim().length >= 5 && title.trim().length <= 100;
        }

        function validateContent(content) {
            return content.trim().length >= 10;
        }

        // Real-time mobile validation
        mobileInput.addEventListener('input', function() {
            let mobile = this.value.replace(/\D/g, ''); // Remove non-digits
            if (mobile.length > 10) {
                mobile = mobile.substring(0, 10);
            }
            this.value = mobile;

            // Reset validation states
            mobileError.classList.add('hidden');
            mobileSuccess.classList.add('hidden');
            mobileValidation.classList.add('hidden');

            if (mobile.length === 0) {
                // Empty state - no validation shown
                return;
            } else if (mobile.length === 10 && validateMobile(mobile)) {
                mobileSuccess.classList.remove('hidden');
                mobileValidation.classList.remove('hidden');
            } else if (mobile.length === 10) {
                mobileError.classList.remove('hidden');
            }
        });

        // Name validation on blur
        nameInput.addEventListener('blur', function() {
            const name = this.value.trim();
            if (name && !validateName(name)) {
                nameError.classList.remove('hidden');
            } else {
                nameError.classList.add('hidden');
            }
        });

        // Real-time title character counter
        titleInput.addEventListener('input', function() {
            const length = this.value.length;
            titleCount.textContent = length;
            
            if (length > 90) {
                titleCount.parentElement.classList.add('text-red-500');
                titleCount.parentElement.classList.remove('text-gray-500');
            } else {
                titleCount.parentElement.classList.remove('text-red-500');
                titleCount.parentElement.classList.add('text-gray-500');
            }
        });

        // Real-time content character counter and status
        contentInput.addEventListener('input', function() {
            const length = this.value.length;
            contentCount.textContent = length;
            
            if (length < 50) {
                contentStatus.textContent = 'Too short';
                contentStatus.className = 'text-orange-500';
            } else if (length < 200) {
                contentStatus.textContent = 'Good length';
                contentStatus.className = 'text-green-500';
            } else {
                contentStatus.textContent = 'Excellent!';
                contentStatus.className = 'text-green-600 font-semibold';
            }
        });

        // Message display functions
        function showMessage(type, message) {
            messageContainer.classList.remove('hidden');
            
            if (type === 'success') {
                successMessage.classList.remove('hidden');
                errorMessage.classList.add('hidden');
            } else {
                errorMessage.classList.remove('hidden');
                successMessage.classList.add('hidden');
                errorText.textContent = message;
            }
            
            // Smooth scroll to message
            setTimeout(() => {
                messageContainer.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
            }, 100);
        }

        function hideMessages() {
            messageContainer.classList.add('hidden');
            successMessage.classList.add('hidden');
            errorMessage.classList.add('hidden');
        }

        // Loading state management
        function setLoading(loading) {
            if (loading) {
                submitBtn.disabled = true;
                btnText.classList.add('hidden');
                btnLoading.classList.remove('hidden');
            } else {
                submitBtn.disabled = false;
                btnText.classList.remove('hidden');
                btnLoading.classList.add('hidden');
            }
        }

        // API submission function
        async function submitToAPI(formData) {
            try {
                // Simulate API call - replace with your actual endpoint
                const response = await fetch('/api/submit-article', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                // For demo purposes, simulate success after delay
                await new Promise(resolve => setTimeout(resolve, 2000));

                if (response.ok) {
                    const result = await response.json();
                    return { success: true, data: result };
                } else {
                    throw new Error(`Server error: ${response.status}`);
                }
            } catch (error) {
                // For demo, simulate successful submission
                console.log('Demo mode - simulating successful submission');
                return { success: true, data: { id: Date.now() } };
            }
        }

        // Form submission handler
        form.addEventListener('submit', async function(event) {
            event.preventDefault();
            hideMessages();

            // Collect and validate form data
            const formData = {
                name: nameInput.value.trim(),
                mobile: mobileInput.value.trim(),
                title: titleInput.value.trim(),
                content: contentInput.value.trim(),
                timestamp: new Date().toISOString()
            };

            // Client-side validation
            let errors = [];

            if (!validateName(formData.name)) {
                errors.push('Please enter a valid name (2-50 characters, letters only)');
            }

            if (!validateMobile(formData.mobile)) {
                errors.push('Please enter a valid 10-digit mobile number starting with 6-9');
            }

            if (!validateTitle(formData.title)) {
                errors.push('Article title must be 5-100 characters long');
            }

            if (!validateContent(formData.content)) {
                errors.push('Article content must be at least 10 characters long');
            }

            if (errors.length > 0) {
                showMessage('error', errors.join('. '));
                return;
            }

            // Submit to API
            setLoading(true);

            try {
                const result = await submitToAPI(formData);

                if (result.success) {
                    showMessage('success', 'Your article has been submitted successfully!');
                    
                    // Reset form
                    form.reset();
                    titleCount.textContent = '0';
                    contentCount.textContent = '0';
                    contentStatus.textContent = 'Too short';
                    contentStatus.className = 'text-orange-500';
                    
                    // Hide validation messages
                    mobileSuccess.classList.add('hidden');
                    mobileValidation.classList.add('hidden');
                    nameError.classList.add('hidden');
                    
                    console.log('Article submitted:', formData);
                } else {
                    throw new Error(result.error || 'Unknown error occurred');
                }
            } catch (error) {
                showMessage('error', `Submission failed: ${error.message}`);
                console.error('Submission error:', error);
            } finally {
                setLoading(false);
            }
        });

        // Initialize counters
        titleCount.textContent = '0';
        contentCount.textContent = '0';

        console.log('Article submission form initialized');
    </script>
</body>
</html>